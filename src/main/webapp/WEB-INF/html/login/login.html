<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>登录</title>
	<link rel="stylesheet" href="http://localhost:8080/study/js/third/bootstrap-3.3.5/dist/css/bootstrap.min.css">
</head>
<body>
	<form class="form-horizontal" role="form">
	   <div class="form-group">
	      <label for="userName" class="col-sm-2 control-label">用户名：</label>
	      <div class="col-sm-3">
	         <input type="text" class="form-control" id="userName" placeholder="请输入用户名">
	      </div>
	   </div>
	   <div class="form-group">
	      <label for="password" class="col-sm-2 control-label">密码：</label>
	      <div class="col-sm-3">
	         <input type="text" class="form-control" id="password" placeholder="请输入密码">
	      </div>
	   </div>
	   <div class="form-group">
	  		<label for="valiCode" class="col-sm-2 control-label">验证码：</label>
	  		<div class="col-sm-3">
	  			<input type="text" id="valiCode" name="valiCode" value="" />
	       		<img src="kaptcha.jpg" width="200" id="kaptchaImage" title="看不清，点击换一张" />  
				<br /><small>看不清，点击换一张</small>  
	      	</div>
	   </div>
	   <div class="form-group">
	      <div class="col-sm-offset-2 col-sm-10">
	         <div class="checkbox">
	            <label>
	               <input type="checkbox"> 记住密码
	            </label>
	         </div>
	      </div>
	   </div>
	   <div class="form-group">
	      <div class="col-sm-offset-2 col-sm-10">
	         <button type="button" onclick="login()" class="btn btn-success">登录</button>
	      </div>
	   </div>
	</form>
	<script type="text/javascript" src="http://localhost:8080/study/js/third/jquery/jquery-2.2.0.js"></script>
	<script src="http://localhost:8080/study/js/third/bootstrap-3.3.5/dist/js/bootstrap.js"></script>
	<script type="text/javascript">
		function login(){
			var param = {"userName":$("#userName").val(),"password":$("#password").val(),"valiCode":$("#valiCode").val()};
			$.ajax({
				url:'http://localhost:8080/study/login/login.do',
			    type : 'POST',  
		        contentType : 'application/json',  
		        dataType : 'json',
		        data:JSON.stringify(param),
				success : function(data){
					if(data.code == 100){	//登录失败
					
					}else if(data.code == 200){	//登录成功，跳转到用户列表界面
						window.location.href="http://localhost:8080/study/user/list.do";
					}
					console.log(data.msg);
				},
				error : function(data){
				}
			});
		}
		
	    $(function() {
	        $('#kaptchaImage').click(function() {$(this).attr('src','kaptcha.jpg?' + Math.floor(Math.random() * 100));});  
	    });  
	</script>  
</body>
</html>